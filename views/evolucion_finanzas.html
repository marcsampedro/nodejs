<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/css/styles.css">
  <title>Evolución Finanzas</title>
</head>
<body>
  <header class="topbar">
    <div class="logo">NTT DATA<br>Control Económico</div>
    <nav class="nav-pills" aria-label="Navegación principal">
      <a href="index.html" class="pill">Dashboard</a>
      <a href="control_mensual.html" class="pill">Control Mensual</a>
      <a href="evolucion_finanzas.html" class="pill active">Evolución finanzas</a>
      <a href="prepagado.html" class="pill">Prepagado</a>
  </nav>
  <button id="btn-generate-pdf" class="btn-pdf" title="Generar informe PDF" style="margin-left:8px;">Generar Informe PDF</button>
</header>
  <main class="container">
    <h2>Evolución Finanzas</h2>

    <section class="card chart-card" aria-label="Serie Mensual">
      <h3>Serie Mensual</h3>
      <canvas id="chart-series" width="800" height="300"></canvas>
    </section>

    <section class="card chart-card" aria-label="Evolución de la bolsa mensual">
      <h3>Evolución de la bolsa mensual</h3>
      <canvas id="chart-bolsa" width="800" height="300"></canvas>
    </section>
  </main>

  <!-- Inicialización de gráficos con datos simulados -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    fetch('/data/finance-fixtures.json')
      .then(res => res.json())
      .then(data => {
        const ctxSeries = document.getElementById('chart-series').getContext('2d');
        const chartSeries = new Chart(ctxSeries, {
          type: 'line',
          data: {
            labels: data.series.labels,
            datasets: [
              { label: 'Forecast', data: data.series.forecast, borderColor: 'rgba(54,162,235,1)', fill: false},
              { label: 'Facturado', data: data.series.facturado, borderColor: 'rgba(255,99,132,1)', fill: false}
            ]
          },
          options: { responsive: true, scales: { y: { beginAtZero: true } } }
        });
        const ctxBolsa = document.getElementById('chart-bolsa').getContext('2d');
        const chartBolsa = new Chart(ctxBolsa, {
          type: 'line',
          data: {
            labels: data.bolsa.labels,
            datasets: [
              { label: 'Incremento', data: data.bolsa.incremento, borderColor: 'rgba(75,192,192,1)', fill:false},
              { label: 'Acumulado', data: data.bolsa.acumulado, borderColor: 'rgba(255,206,86,1)', fill:false}
            ]
          },
          options: { responsive: true, scales: { y: { beginAtZero: true } } }
        });
      })
      .catch(err => {
        console.error('Error loading fixtures', err);
      });
  </script>
</body>
</html>
