<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/css/styles.css">
  <title>Dashboard</title>
</head>
<body>
  <header class="topbar">
    <div class="logo">NTT DATA<br>Control Económico</div>
    <nav class="nav-pills" aria-label="Navegación principal">
      <a href="index.html" class="pill active">Dashboard</a>
      <a href="control_mensual.html" class="pill">Control Mensual</a>
      <a href="evolucion_finanzas.html" class="pill">Evolución finanzas</a>
      <a href="prepagado.html" class="pill">Prepagado</a>
    </nav>
  <button id="btn-generate-pdf" class="btn-pdf" title="Generar informe PDF" style="margin-left:8px;">Generar Informe PDF</button>
</header>
  <main class="container">
    <section class="section-title">
      <h2>Resumen Financiero</h2>
    </section>

    <section class="cards-grid" aria-label="Resumen de métricas">
      <article class="card metric-card">
        <div class="metric-label">Total Forecast</div>
        <div class="metric-value" id="total-forecast">1.397.823,16 €</div>
      </article>
      <article class="card metric-card">
        <div class="metric-label">Total Facturado</div>
        <div class="metric-value" id="total-facturado">1.397.828,34 €</div>
      </article>
      <article class="card metric-card">
        <div class="metric-label">WIP (Forecast - Facturado)</div>
        <div class="metric-value negative" id="wip">-5,18 €</div>
      </article>
      <article class="card metric-card">
        <div class="metric-label">Pendiente (incurrir + fra.)</div>
        <div class="metric-value" id="pendiente">76.874,79 €</div>
      </article>
    </section>

    <section class="filters-bar card" aria-label="Filtrar por fechas">
      <div class="filters-grid">
        <label>Desde
          <input type="month" value="2025-04" />
        </label>
        <label>Hasta
          <input type="month" value="" />
        </label>
        <button class="btn-filter" type="button">Filtrar</button>
        <button class="btn-reset" type="button">Reset</button>
      </div>
    </section>

    <section class="charts-grid">
      <section class="card chart-card" aria-label="Serie Mensual">
        <h3>Serie Mensual</h3>
        <canvas id="chart-series" width="800" height="300"></canvas>
      </section>
      <section class="card chart-card" aria-label="Evolución de la bolsa mensual">
        <h3>Evolución de la bolsa mensual</h3>
        <canvas id="chart-bolsa" width="800" height="300"></canvas>
      </section>
    </section>
  </main>
  <!-- Inicialización de gráficos con datos simulados -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    const ctxSeries = document.getElementById('chart-series').getContext('2d');
    const chartSeries = new Chart(ctxSeries, {
      type: 'line',
      data: {
        labels: ['2025-04','2025-05','2025-06','2025-07','2025-08','2025-09'],
        datasets: [
          { label: 'Forecast', data: [100, 200, 150, 180, 220, 260], borderColor: 'rgba(54,162,235,1)', fill: false},
          { label: 'Facturado', data: [90, 180, 160, 170, 210, 230], borderColor: 'rgba(255,99,132,1)', fill: false}
        ]
      },
      options: { responsive: true, scales: { y: { beginAtZero: true } } }
    });
    const ctxBolsa = document.getElementById('chart-bolsa').getContext('2d');
    const chartBolsa = new Chart(ctxBolsa, {
      type: 'line',
      data: {
        labels: ['2025-04','2025-05','2025-06','2025-07','2025-08','2025-09'],
        datasets: [
          { label: 'Incremento', data: [40, 50, 60, 80, 60, 90], borderColor: 'rgba(75,192,192,1)', fill:false},
          { label: 'Acumulado', data: [100, 120, 130, 180, 230, 260], borderColor: 'rgba(255,206,86,1)', fill:false}
        ]
      },
      options: { responsive: true, scales: { y: { beginAtZero: true } } }
    });
  </script>
<script>
  document.getElementById('btn-generate-pdf').addEventListener('click', function() {
    window.print();
  });
</script>
</body>
</html>
